---
title: 工作中常见问题以及解决问题办法汇总
date: 2025-01-13 15:43:49
tags: Liunx
categories: Linux
top: 13
---

#### 一、login登录问题

```
apt install gnupg2 pass
```

#### 二、如何挂载linux系统磁盘

2.1 挂载磁盘
```
#查看未挂载的磁盘
fdisk -l 

mkfs -t ext4 /dev/vdb

mount /dev/vdb /data

blkid /dev/vdb

#获取UUID
vi /etc/fstab

UUID=fd7bed54-c0fc-4807-a602-895176c4b239" /data ext4 defaults 0 2

#更新开机，重启后自动挂载
mount -a
```

2.2扩容磁盘

对已有磁盘扩容更新大小命令
```
#ext4文件系统
resize2fs /dev/vdb
```

2.3 磁盘阵列Raid5
1、确认硬盘状态
```
使用 lsblk 或 fdisk -l 查看所有硬盘（假设为 /dev/sdb 到 /dev/sdi，保留 /dev/sda 作为系统盘）
```
确保硬盘无重要数据（RAID 创建会清除数据）
```
sudo apt update
sudo apt install mdadm
```
2、 创建 RAID 5（8块盘，可用容量为7块盘之和）
```
sudo mdadm --create /dev/md0 \
  --level=5 \
  --raid-devices=8 \
  /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf /dev/sdg /dev/sdh /dev/sdi
```
3、 查看创建进度（需数分钟到数小时，取决于硬盘容量）
```
watch cat /proc/mdstat
```

4、格式化 RAID 设备为 ext4 文件系统

```
sudo mkfs.ext4 /dev/md0
```

5、创建挂载点

```
sudo mkdir /data_raid5
```

6、临时挂载

```
sudo mount /dev/md0 /data_raid5
```

配置开机自动挂载
#### 获取 RAID 设备的 UUID

```
sudo blkid /dev/md0
```

#### 编辑 /etc/fstab，添加一行（替换为实际 UUID）
```
echo 'UUID=xxxx-xxxx /mnt/raid5 ext4 defaults 0 0' | sudo tee -a /etc/fstab
```

保存 RAID 配置

```
# 备份当前 RAID 配置
sudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf

# 更新 initramfs
sudo update-initramfs -u
```

验证 RAID 状态

```
# 查看详细信息
sudo mdadm --detail /dev/md0

# 查看磁盘使用情况
df -h /mnt/raid5

```

#### 三、nginx重定向端口丢失问题

```
#nginx配置文件中加入以下命令
absolute_redirect off
```

#### 四、mysql8.0远程连接添加root账号密码认证
```
#登录mysql8.0数据库终端
mysql -uroot -h 127.0.0.1 -p

#修改密码
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'you password';    

#刷新权限
FLUSH privileges; 
```

#### 五、Python启动http服务
```
python -m SimpleHTTPServer 18000

python3 -m http.server 18000
```

#### 六、Python删除文件目录以及文件夹
```
import os
os.remove('you file')

import shutil
shutil.rmtree('you dir')
```

#### 七、docker无法拉取dockerHub官网镜像问题
```
vi /etc/docker/daemon.json 

"registry-mirrors": [
   "https://2a6bf1988cb6428c877f723ec7530dbc.mirror.swr.myhuaweicloud.com",
    "https://docker.m.daocloud.io",
    "https://hub-mirror.c.163.com",
    "https://mirror.baidubce.com",
    "https://dockerhub.icu",
    "https://docker.registry.cyou",
    "https://docker-cf.registry.cyou",
    "https://dockercf.jsdelivr.fyi",
    "https://docker.jsdelivr.fyi",
    "https://dockertest.jsdelivr.fyi",
    "https://mirror.aliyuncs.com",
    "https://dockerproxy.com",
    "https://mirror.baidubce.com",
    "https://docker.m.daocloud.io",
    "https://docker.nju.edu.cn",
    "https://docker.mirrors.sjtug.sjtu.edu.cn",
    "https://docker.mirrors.ustc.edu.cn",
    "https://mirror.iscas.ac.cn",
    "https://docker.rainbond.cc"
]
systemctl restart docker
#再次尝试拉取docker镜像
```
