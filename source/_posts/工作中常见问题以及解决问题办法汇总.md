---
title: 工作中常见问题以及解决问题办法汇总
date: 2025-01-13 15:43:49
tags: Liunx
categories: Linux
top: 13
---

#### 一、login登录问题

```
apt install gnupg2 pass
```

#### 二、如何挂载linux系统磁盘

2.1 挂载磁盘
```
#查看未挂载的磁盘
fdisk -l 

mkfs -t ext4 /dev/vdb

mount /dev/vdb /data

blkid /dev/vdb

#获取UUID
vi /etc/fstab

UUID=fd7bed54-c0fc-4807-a602-895176c4b239" /data ext4 defaults 0 2

#更新开机，重启后自动挂载
mount -a
```

2.2扩容磁盘

对已有磁盘扩容更新大小命令
```
#ext4文件系统
resize2fs /dev/vdb

#已有系统盘进行扩容
lvresize -l +100%FREE /dev/mapper/ubuntu # + tab键补齐

resize2fs /dev/mapper/ubuntu  # + tab 自动补齐
```
如同：
![alt text](/images/work/7.jpg)

![alt text](/images/work/6.jpg)

2.3 磁盘阵列Raid5
1、确认硬盘状态
```
使用 lsblk 或 fdisk -l 查看所有硬盘（假设为 /dev/sdb 到 /dev/sdi，保留 /dev/sda 作为系统盘）
```
确保硬盘无重要数据（RAID 创建会清除数据）
```
sudo apt update
sudo apt install mdadm
```
2、 创建 RAID 5（8块盘，可用容量为7块盘之和）
```
sudo mdadm --create /dev/md0 \
  --level=5 \
  --raid-devices=8 \
  /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf /dev/sdg /dev/sdh /dev/sdi
```
3、 查看创建进度（需数分钟到数小时，取决于硬盘容量）
```
watch cat /proc/mdstat
```

4、格式化 RAID 设备为 ext4 文件系统

```
sudo mkfs.ext4 /dev/md0
```

5、创建挂载点

```
sudo mkdir /data_raid5
```

6、临时挂载

```
sudo mount /dev/md0 /data_raid5
```

配置开机自动挂载
#### 获取 RAID 设备的 UUID

```
sudo blkid /dev/md0
```

#### 编辑 /etc/fstab，添加一行（替换为实际 UUID）
```
echo 'UUID=xxxx-xxxx /mnt/raid5 ext4 defaults 0 0' | sudo tee -a /etc/fstab
```

保存 RAID 配置

```
# 备份当前 RAID 配置
sudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf

# 更新 initramfs
sudo update-initramfs -u
```

验证 RAID 状态

```
# 查看详细信息
sudo mdadm --detail /dev/md0

# 查看磁盘使用情况
df -h /mnt/raid5

```

#### 三、nginx重定向端口丢失问题

```
#nginx配置文件中加入以下命令
absolute_redirect off
```

#### 四、mysql8.0远程连接添加root账号密码认证
```
#登录mysql8.0数据库终端
mysql -uroot -h 127.0.0.1 -p

#修改密码
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'you password';    

#刷新权限
FLUSH privileges; 
```

#### 五、Python启动http服务
```
python -m SimpleHTTPServer 18000

python3 -m http.server 18000
```

#### 六、Python删除文件目录以及文件夹
```
import os
os.remove('you file')

import shutil
shutil.rmtree('you dir')
```

#### 七、docker无法拉取dockerHub官网镜像问题
```
vi /etc/docker/daemon.json 

"registry-mirrors": [
   "https://2a6bf1988cb6428c877f723ec7530dbc.mirror.swr.myhuaweicloud.com",
    "https://docker.m.daocloud.io",
    "https://hub-mirror.c.163.com",
    "https://mirror.baidubce.com",
    "https://dockerhub.icu",
    "https://docker.registry.cyou",
    "https://docker-cf.registry.cyou",
    "https://dockercf.jsdelivr.fyi",
    "https://docker.jsdelivr.fyi",
    "https://dockertest.jsdelivr.fyi",
    "https://mirror.aliyuncs.com",
    "https://dockerproxy.com",
    "https://mirror.baidubce.com",
    "https://docker.m.daocloud.io",
    "https://docker.nju.edu.cn",
    "https://docker.mirrors.sjtug.sjtu.edu.cn",
    "https://docker.mirrors.ustc.edu.cn",
    "https://mirror.iscas.ac.cn",
    "https://docker.rainbond.cc"
]
systemctl restart docker
#再次尝试拉取docker镜像
```
#### 八、Ubuntu下设置网络配置
```
#查看网络
ip addr show

#编辑网络配置文件
vi /etc/netplan/00-installer-config.yaml

#自动获取
network:
  ethernets:
    enp5s0:  # 替换为你的网络接口名
      dhcp4: true  # 开启 IPv4 自动获取
      dhcp6: false  # 关闭 IPv6（如需开启设为 true）
    enp6s0:  # 替换为你的网络接口名 ，如果是单网卡直接删掉即可
      dhcp4: true
      dhcp6: false
  version: 2

#双网卡配置
network:
  ethernets:
    enp5s0: #替换为你的网络接口名
      dhcp4: false
      addresses: [192.167.2.24/24] #实际ip地址
      gateway4: 192.167.2.1
      nameservers:
              addresses: [114.114.114.114,8.8.8.8]
    enp6s0: #替换为你的网络接口名
      dhcp4: no
      addresses: [10.xxx.xx.101/30] #实际ip地址
      gateway4: 10.xxx.xx.102
  version: 2

#保存配置生效
netplan apply
```

#### 九、安装Ubuntu Server 18.04版本操作系统

首先需要找一个U盘刻录工具，将Ubuntu Server 18.04版本的ISO文件刻录到U盘上。

1、重启进入BIOS界面（以宝德服务器为例，按Del键进入），到Boot选项，选择Boot option #1选项，选择设置U盘启动

![alt text](/images/work/1.jpg)

选择完成之后按 F4 进行保存配置退出，重启服务，即可进入安装流程

2、修改Ubuntu 源地址

```
#阿里云源地址
https://mirrors.aliyun.com/ubuntu
```
![alt text](/images/work/2.jpg)

3、设置服务器名称，用户名，密码

![alt text](/images/work/3.jpg)

5、在Install OpenSSH server 按空格 [X] 勾选安装SSH服务 ， Import SSH identity [No] 是否导入SSH密钥
##### 想用密钥登陆的时候需要，选择 YES ，从 github/gitLab 同步公钥
##### 选择 [x] Allow password authentication over ssh #是否允许密码登陆 ，按空格选择 X 

![alt text](/images/work/5.jpg)

5、等待操作系统安装完成

![alt text](/images/work/4.jpg)


#### 十、安装完成后，需要进行一些基本配置

主要配置内容
1. 配置网络
2. 配置时区
3. 修改安全复杂且安全等级较高的用户名和密码 
4. 修改SSH 默认端口（可选，建议更换默认端口）
5. 配置防火墙（可选）

